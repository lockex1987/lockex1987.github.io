<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="packagist">
    <title>Đưa thư viện lưu trên Packagist</title>
    <link rel="icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../css/style.css">
  </head>
  <body>
    <article>
      <h2>Đưa thư viện lưu trên Packagist</h2>
      <p>Nếu bạn có một thư viện và muốn lưu trên <a href="https://packagist.org/"

          target="_blank">packagist.org</a> để mọi người có thể cài vào dự án
        của họ bằng Composer thì làm thế nào?</p>
      <p>Đây là các bước làm</p>
      <ul>
        <li>Phát triển thư viện, có file <code>composer.json</code> rõ ràng.</li>
        <li>Bạn sử dụng git để commit thư viện của bạn, sau khi hoàn thành push
          toàn bộ lên một server, chẳng hạn GitHub.</li>
        <li>Đăng ký một tài khoản trên packagist.org, đăng nhập vào, rồi vào mục
          <a href="https://packagist.org/packages/submit" target="_blank">Submit</a>.
          Đơn giản là dán đường link của GitHub đến dự án của bạn, nhấn Check!
          Thế là xong.</li>
      </ul>
      <p>Bây giờ thực hiện thử đăng một thư viện, các bước làm từ đầu.</p>
      <h3>Code PHP thư viện</h3>
      <p>Ví dụ đơn giản này, sẽ tạo một thư viện có chức năng convert chữ tiếng
        việt có dấu sang dạng không dấu, ví dụ <code>Xin Chào</code> thành <code>xin
          chao</code>.</p>
      <p>Thư viện sẽ đặt tên như sau: chọn tên vendor là <code>XuanthuLab</code>
        (sẽ dùng làm namespace cấp 1), thư viện lưu ở thư mục <code>src/</code>,
        trong thư mục này tạo ra thư mục <code>Tools</code>, trong đó có file
        php <code>src/Tools/Convert.php</code> với nội dung là xây dựng một lớp
        Convert như sau:</p>
      <pre>&lt;?php<br>
namespace XuanthuLab\Tools;

class Convert {
    public static  $decomposed   =   ["à","á","ạ","ả","ã","â","ầ","ấ","ậ","ẩ","ẫ","ă", "ằ","ắ","ặ","ẳ","ẵ","è","é","ẹ","ẻ","ẽ","ê","ề" ,"ế","ệ","ể","ễ", "ì","í","ị","ỉ","ĩ", "ò","ó","ọ","ỏ","õ","ô","ồ","ố","ộ","ổ","ỗ","ơ" ,"ò","ớ","ợ","ở","õ", "ù","ú","ụ","ủ","ũ","ư","ừ","ứ","ự","ử","ữ", "ỳ","ý","ỵ","ỷ","ỹ", "đ", "À","À","Ạ","Ả","Ã","Â","Ầ","Ấ","Ậ","Ẩ","Ẫ","Ă" ,"Ằ","Ắ","Ặ","Ẳ","Ẵ", "È","É","Ẹ","Ẻ","Ẽ","Ê","Ề","Ế","Ệ","Ể","Ễ", "Ì","Í","Ị","Ỉ","Ĩ", "Ò","Ó","Ọ","Ỏ","Õ","Ô","Ồ","Ố","Ộ","Ổ","Ỗ","Ơ" ,"Ờ","Ớ","Ợ","Ở","Ỡ", "Ù","Ú","Ụ","Ủ","Ũ","Ư","Ừ","Ứ","Ự","Ử","Ữ", "Ỳ","Ý","Ỵ","Ỷ","Ỹ", "Đ"];
    public static  $precomposed  =   ["à","á","ạ","ả","ã","â","ầ","ấ","ậ","ẩ","ẫ","ă", "ằ","ắ","ặ","ẳ","ẵ","è","é","ẹ","ẻ","ẽ","ê","ề" ,"ế","ệ","ể","ễ", "ì","í","ị","ỉ","ĩ", "ò","ó","ọ","ỏ","õ","ô","ồ","ố","ộ","ổ","ỗ","ơ" ,"ờ","ớ","ợ","ở","ỡ", "ù","ú","ụ","ủ","ũ","ư","ừ","ứ","ự","ử","ữ", "ỳ","ý","ỵ","ỷ","ỹ", "đ", "À","Á","Ạ","Ả","Ã","Â","Ầ","Ấ","Ậ","Ẩ","Ẫ","Ă" ,"Ằ","Ắ","Ặ","Ẳ","Ẵ", "È","É","Ẹ","Ẻ","Ẽ","Ê","Ề","Ế","Ệ","Ể","Ễ", "Ì","Í","Ị","Ỉ","Ĩ", "Ò","Ó","Ọ","Ỏ","Õ","Ô","Ồ","Ố","Ộ","Ổ","Ỗ","Ơ" ,"Ờ","Ớ","Ợ","Ở","Ỡ", "Ù","Ú","Ụ","Ủ","Ũ","Ư","Ừ","Ứ","Ự","Ử","Ữ", "Ỳ","Ý","Ỵ","Ỷ","Ỹ", "Đ"];
    public static  $latin        =   ["a","a","a","a","a","a","a","a","a","a","a" ,"a","a","a","a","a","a", "e","e","e","e","e","e","e","e","e","e","e", "i","i","i","i","i", "o","o","o","o","o","o","o","o","o","o","o","o" ,"o","o","o","o","o", "u","u","u","u","u","u","u","u","u","u","u", "y","y","y","y","y", "d", "a","a","a","a","a","a","a","a","a","a","a","a" ,"a","a","a","a","a", "e","e","e","e","e","e","e","e","e","e","e", "i","i","i","i","i", "o","o","o","o","o","o","o","o","o","o","o","o" ,"o","o","o","o","o", "u","u","u","u","u","u","u","u","u","u","u", "y","y","y","y","y", "d"];

    public static function convertLatin($str)<br>    {
        $str = str_replace(self::$decomposed, self::$latin, str_replace(self::$precomposed, self::$latin, $str));
        return mb_strtolower($str);
    }
}</pre>
      <h3>Cấu hình Composer</h3>
      <p>Chạy lệnh khởi tạo Composer và nhập các thông tin cần thiết để có được
        file <code>composer.json</code>:</p>
      <pre>composer init
</pre>
      <p>Giả sử thư viện này yêu cầu cài đặt một thư viện khác ví dụ <code>monolog/monolog</code>,
        chạy lệnh:</p>
      <pre>composer require monolog/monolog
</pre>
      <p>Mở <code>composer.json</code> ra, thêm vào autoload PSR-4 cho thư viện
        của bạn, bằng đoạn code:</p>
      <pre>"autoload": {
    "psr-4": {
        "XuanthuLab\\": "src/"
    }
}</pre>
      <p>File <code>composer.json</code> cuối cùng như sau:</p>
      <pre>{
    "name": "xuanthulabnet/latinurl",
    "description": "Convert VietNam Url",
    "authors": [
        {
            "name": "XTLAB",
            "email": "xuanthulab.net@gmail.com"
        }
    ],
    "require": {
        "monolog/monolog": "^1.24"
    },
    "autoload": {
        "psr-4": {
            "XuanthuLab\\": "src/"
        }
    }
}</pre>
      <h3>Tạo một repo GitHub để lưu code dự án</h3>
      <p>Đơn giản, bạn đăng ký một tài khoản GitHub, tạo ra một repo để lưu
        code. Mình đã tạo một Repo trên GitHub <a href="https://github.com/xuanthulabnet/latinurl"

          target="_blank">https://github.com/xuanthulabnet/latinurl</a> để lưu
        dự án này. Địa chỉ git là <code>git@github.com:xuanthulabnet/latinurl.git</code>.</p>
      <p>Sử dụng GitHub như thế nào, làm thế nào để truy cập GitHub từ SSH hãy
        tham khảo tại: <a href="https://xuanthulab.net/su-dung-github-de-lam-remote-repo-chua-code-du-an.html"

          target="_blank">SỬ DỤNG GITHUB</a>.</p>
      <h3>Tạo git local repo cho dự án và push lên GitHub</h3>
      <p>Thực hiện các lệnh git sau:</p>
      <pre># Khởi tạo local repo
# git init

# Chuẩn bị commit
# git add .
# git add -A

# Thực hiện commit
# git commit -m 'Init'

# Tạo 1 tag, đánh dấu phiên bản (Ví dụ V1.0.0)
# git tag v1.0.0

# Thêm remote vào local
# git remote add origin git@github.com:xuanthulabnet/latinurl.git

# Push tất cả lên GitHub
# git push --all
# git push --tag
</pre>
      <p>Đến đây, tất cả code đã được chuyển lưu trên GitHub ở địa chỉ <code>https://github.com/xuanthulabnet/latinurl</code></p>
      <h3>Submit vào Packagist</h3>
      <p>Bạn đăng nhập vào <a href="https://packagist.org/" target="_blank">Packagist</a>,
        sau đó bấm vào <a href="https://packagist.org/packages/submit" target="_blank">Submit</a></p>
      <p>Dán địa chỉ GitHub của dự án <code>https://github.com/xuanthulabnet/latinurl</code>
        vào hộp <code>Repository URL (Git/Svn/Hg)</code>, bấm nút <code>Check</code>,
        chờ một chút là thư viện của bạn được chuyển vào <code>Packagist</code></p>
      <p>Dự án trên sau khi submit, đã có tại địa chỉ <a target="_blank" href="https://packagist.org/packages/xuanthulabnet/latinurl">xuanthulabnet/latinurl</a></p>
      <p>Giờ muốn tích hợp vào dự án bất kỳ, chỉ việc gõ:</p>
      <pre>composer require xuanthulabnet/latinurl
</pre>
      <p>Bạn hãy thử kiểm tra xem thư viện trên tải về như thế nào, nó sẽ nằm
        trong <code>vendor</code> của bạn, dễ dàng sử dụng với namespace <code>XuanthuLab\Tools\Convert</code></p>
      <p>Chúc thành công!</p>
    </article>
    <script src="../../js/docs.js"></script>
  </body>
</html>
