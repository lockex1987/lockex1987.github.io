<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="psr-4, autoload">
    <title>Cấu trúc thư mục của dự án dùng Composer</title>
    <link rel="icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../css/style.css">
  </head>
  <body>
    <article>
      <h2>Cấu trúc thư mục của dự án dùng Composer</h2>
      <p>Xem thêm trong: <a href="http://xuanthulab.net/psr-4-autoloader-tieu-chuan-viet-tu-dong-nap-khoi-tao-php.html">PSR-4:
          Autoload</a>.</p>
      <p>Như đã biết các thư viện hiện này, và code của bạn sau này được khuyến
        khích xây dựng sao cho đáp ứng cơ chế tự động nạp theo chuẩn <code>PRS-4</code>.</p>
      <p>Tổ chức code của bạn (giống như các thư viện) được đặt tên truy cập
        được bằng <code>namespace</code>.</p>
      <p>Mỗi module dự án của bạn có một cái tên theo cấu trúc <code>vendor/module</code></p>
      <p>Sau đó, để đảm bảo <code>vendor/autoload.php</code> được gọi, thì
        ngoài các thư viện, thì nó cũng cấu hình để gọi được module của bạn, nếu
        vậy bạn cần cập nhật <code>composer.json</code> ở thành phần <code>autoload</code></p>
      <p>Ví dụ cụ thể như sau:</p>
      <p>Xây dựng một lớp có tên <code>FirstClass</code>, có <code>namespace</code>
        là <code>MyCompany/MyModule</code>. Code file lưu trong file <code>app/MyModule/FirstClass.php</code></p>
      <pre>&lt;?php
namespace MyCompany\MyModule;

class FirstClass {
    function helloComposer()
    {

    }
}</pre>
      <p>Như trên là đã đúng chuẩn PRS-4, composer giúp bạn tích hợp vào <code>vendor/autoload.php</code>,
        để có thể tự động include có trên khi cần dùng đến bằng đoạn code ví dụ:</p>
      <pre>&lt;?php

$cls = new MyCompany\MyModule\FirstClass();</pre>
      <p>Hoặc</p>
      <pre>&lt;?php
use MyCompany\MyModule\FirstClass;

$cls = new FirstClass();</pre>
      <p>Để làm được điều đó, bạn hãy cho composer biết bạn có một module chuẩn
        tự động nạp PRS-4, bằng đoạn mã sau trong <code>composer.json</code>.</p>
      <pre>{
    "autoload": {
        "psr-4": {
            "MyCompany\\": "app/"
         }
    }
}</pre>
      <p>Điều đó có nghĩa là namespace cấp 1 - <code>MyCompany</code> sẽ trỏ
        đến thư mục <code>app/</code>, bắt đầu từ cấp tiếp theo sẽ trỏ theo cấu
        trức thư mục này. <code>MyCompany\MyModule\FirstClass</code> thì tương
        ứng ở vị trí <code>app/Mymodule/FirstClass.php</code></p>
      <p>Khai báo <code>composer.json</code> như trên xong, gõ lệnh:</p>
      <pre>composer dumpautoload
</pre>
      <p>Giờ thì <code>vendor/autoload.php</code> có cơ chế để tự động nạp code
        của bạn khi dùng đến!</p>
    </article>
    <script src="../../js/docs.js"></script>
  </body>
</html>
