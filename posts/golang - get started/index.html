<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tôi đã học Golang như thế nào">
    <title>Tôi học Golang</title>
    <link rel="icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
      .source-file {
        font-weight: 500;
        padding: 0.25rem 1rem 0.25rem 2rem;
        background-color: rgb(106, 215, 229);
        background-image: url(images/source-file.png);
        background-repeat: no-repeat;
        background-position: 8px center;
      }
      
      pre.code-block {
      	background: #FFF;
        border-left: 2px solid rgb(106, 215, 229);
        padding-left: 1rem;
      }
      
      .command {
        /* background-color: #343a40; */ /* .bg-dark */
        /* color: #28a745; */ /* text-success */
      }
      
      pre.output {
        background-color: #343a40; /* .bg-dark */
   			color: #fff; /* .text-white */
      }
      
      .note {
        margin-bottom: 1rem;
        padding: 1rem;
        border: 1px solid #375EAB;
        border-radius: 5px;
        background: #E0EBF5;
      }
    </style>
  </head>
  <body>
    <article>
      <h2>Tôi học Golang</h2>
      <p>Code ngắn gọn, dạng snippet, có ảnh minh họa.</p>
      <p>Ghi chép lại hàng ngày. Sau một năm, khi số lượng và chất lượng đã OK
        thì xuất bản epub book, dạng handbook như Flavio Copes.</p>
      <p>Học từ dễ đến khó. Không đâm đầu vào luôn Goroutine.</p>
      <p>Học ngôn ngữ mới, hiện đại: có logging, linting, testing.</p>
      <p>Convention sử dụng trong sách</p>
      <p>Câu lệnh:</p>
      <pre class="command">go version</pre>
      <p>Kết quả câu lệnh:</p>
      <pre class="output">go version go1.16.3 windows/amd64</pre>
      <p>Mã nguồn:</p>
      <pre class="code-block"><code class="go">package main

import "fmt"

func main() {
	fmt.Println("Hello, World")
}</code></pre>
      <p>Chú ý:</p>
      <div class="note"> Hãy ghi chép cẩn thận </div>
      <h3>Cài đặt</h3>
      <h4>Windows</h4>
      <p>Download file msi từ địa chỉ sau:</p>
      <p><a href="https://golang.org/dl/" target="_blank">https://golang.org/dl/</a></p>
      <p>Sau đó cài đặt như chương trình bình thường. Trình cài đặt sẽ tự thêm
        các đường dẫn <code>C:\Program Files\Go\bin</code> và <code>C:\Users\&lt;tên
          user&gt;\go\bin</code> vào biến môi trường <code>PATH</code>. Bạn có
        thể thực hiện các lệnh: <code>go</code>, <code>gofmt</code>, <code>go-outline</code>,
        <code>gopls</code>,...</p>
      <p>Kiểm tra việc cài đặt có thành công không:</p>
      <pre class="command">go version</pre>
      <p>Kết quả có dạng:</p>
      <pre class="output">go version go1.16.3 windows/amd64</pre>
      <h4>Linux</h4>
      <p>Thực hiện các lệnh sau, thay GOVERSION bằng giá trị tương ứng bạn muốn:</p>
      <pre class="command">GOVERSION="go1.16.4"

curl -O https://golang.org/dl/$GOVERSION.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf $GOVERSION.linux-amd64.tar.gz
# sudo tar -xvf $GOVERSION.linux-amd64.tar.gz
# sudo rm -rf /usr/local/go
# sudo mv go /usr/local
# sudo rm $GOVERSION.linux-amd64.tar.gz

echo 'export PATH=$PATH:/usr/local/go/bin' &gt;&gt; ~/.profile
# echo 'export GOPATH=$HOME/go' &gt;&gt; ~/.profile
# echo 'export PATH=$PATH:$GOPATH/bin' &gt;&gt; ~/.profile

source ~/.profile
</pre>
      <p>Ảnh</p>
      <h3>Chương trình đầu tiên</h3>
      <p>Soạn thảo file <code>hello.go</code> với nội dung sau:</p>
      <div class="source-file">hello.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

func main() {
	fmt.Println("Hello, World")
}</code></pre>
      <p>Thực hiện:</p>
      <pre>go run hello.go</pre>
      <p>Build:</p>
      <pre>go build hello.go</pre>
      <p>Lệnh trên sẽ tạo file <code>hello.exe</code> (trên Windows) và file <code>hello</code>
        (trên Linux).</p>
      <p>Chạy file thực thi trên Windows:</p>
      <pre>hello.exe</pre>
      <p>Trên Linux:</p>
      <pre>./hello</pre>
      <h3>Tham số dòng lệnh</h3>
      <p>Sử dụng os.Args.</p>
      <div class="source-file">arguments.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"os"
)

func main() {
	var s, sep string
	for i := 1; i &lt; len(os.Args); i++ {
		s += sep + os.Args[i]
		sep = ","
	}
	fmt.Println(s)
}</code></pre>
      <p>Thực thi:</p>
      <pre class="output">$ go run arguments.go ABC DEF
ABC,DEF</pre>
      <h3>Comment</h3>
      <p>Có hai dạng comment như các ngôn ngữ khác:</p>
      <p>Convention comment là gì? Khai báo đầu file, hàm?</p>
      <p><code>// Comment dòng </code></p>
      <p><code>/* Comment khối */ </code></p>
      <h3>Biến</h3>
      <div class="source-file">variables.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

func main() {
	// Khai báo, sau đó gán giá trị
	var s1 string
	s1 = "s1"

	// Vừa khai báo vừa khởi tạo
	var s2 string = "s2"

	// Có thể bỏ qua kiểu dữ liệu
	var s3 = "s3"

	// Có thể bỏ qua từ khóa var
	s4 := "s4"

	// Lần sau gán lại giá trị cho biến,
	// chúng ta chỉ sử dụng =, không sử dụng :=
	s4 = "s4 updated"

	fmt.Println(s1)
	fmt.Println(s2)
	fmt.Println(s3)
	fmt.Println(s4)
}</code></pre>
      <br>
      <h3>Hằng</h3>
      <p>Sử dụng từ khóa <code>const</code>.</p>
      <div class="source-file">constants.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

const boilingF = 212.0

func main() {
	var f = boilingF
	var c = (f - 32) * 5 / 9
	fmt.Printf("Boiling point = %g°F or %g°C\n", f, c)
}</code></pre>
      <p>Phạm vi của hằng?</p>
      <h3>Từ khóa</h3>
      <p>Và hằng, tên kiểu dữ liệu, hàm built-in.</p>
      <p>Go có 25 từ khóa:</p>
      <table class="table table-responsive-md">
        <tbody>
          <tr>
            <td class="border-top-0"><code>break</code></td>
            <td class="border-top-0"><code>default</code></td>
            <td class="border-top-0"><code>func</code></td>
            <td class="border-top-0"><code>interface</code></td>
            <td class="border-top-0">select</td>
          </tr>
          <tr>
            <td><code>case</code></td>
            <td>defer</td>
            <td>go</td>
            <td><code>map</code></td>
            <td><code>struct</code></td>
          </tr>
          <tr>
            <td>chan</td>
            <td><code>else</code></td>
            <td>goto</td>
            <td><code>package</code></td>
            <td><code>switch</code></td>
          </tr>
          <tr>
            <td><code>const</code></td>
            <td>fallthrough</td>
            <td><code>if</code></td>
            <td><code>range</code></td>
            <td><code>type</code></td>
          </tr>
          <tr>
            <td><code>continue</code></td>
            <td><code>for</code></td>
            <td><code>import</code></td>
            <td><code>return</code></td>
            <td><code>var</code></td>
          </tr>
        </tbody>
      </table>
      <p>Các hằng số:</p>
      <p><code>true</code>, <code>false</code>, iota, <code>nil</code></p>
      <p>Các kiểu dữ liệu:</p>
      <p><code>int</code>, <code>int8</code>, <code>int16</code>, <code>int32</code>,
        <code>int64</code> (int tương đương ?)</p>
      <p><code>uint</code>, <code>uint8</code>, <code>uint16</code>, <code>uint32</code>,
        <code>uint64</code>, <code>uintptr</code> (uint tương đương ?)</p>
      <p><code>float32</code>, <code>float64</code></p>
      <p>complex64, complex128</p>
      <p><code>bool</code></p>
      <p>byte</p>
      <p>rune</p>
      <p><code>string</code></p>
      <p>error</p>
      <p>Các hàm:</p>
      <p>make</p>
      <p><code>len</code></p>
      <p>cap</p>
      <p>new</p>
      <p>append</p>
      <p>copy</p>
      <p>close</p>
      <p>delete</p>
      <p>complex</p>
      <p>real</p>
      <p>imag</p>
      <p>panic</p>
      <p>recover</p>
      <h3>Toán tử</h3>
      <p>Go cũng có các toán tử như các ngôn ngữ khác:</p>
      <p><code>+</code> (cộng), <code>-</code> (trừ), <code>*</code> (nhân), <code>/</code>
        (chia),</p>
      <p><code>+=</code> (cộng thêm vào), <code>-=</code> (từ đi), <code>*=</code>
        (nhân vào), <code>/=</code> (chia đi),</p>
      <p><code>=</code> (gán), <code>:=</code> (khai báo và khởi tạo),</p>
      <p><code>++</code> (tăng), <code>--</code> (giảm)</p>
      <h3>Hàm</h3>
      <p>Sử dụng từ khóa <code>func</code>.</p>
      <p>Cấu trúc:</p>
      <pre>func name(parameter-list) (result-list) {<br>   body<br>}</pre>
      <p>Hàm cũng có thể gán cho biến.</p>
      <p>Có hàm anonymous.</p>
      <p>Hàm variadic, số tham số tùy biến.</p>
      <p>Hàm có thể được <code>defer</code>.</p>
      <div class="source-file">functions.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"math/rand"
	"time"
)

func fToC(f float64) float64 {
	return (f - 32) * 5 / 9
}

/**
 * Hàm có thể trả về nhiều giá trị
 */
func threeRandom() (int, int, int) {
	rand.Seed(time.Now().UnixNano())
	x := rand.Intn(10)
	y := rand.Intn(10)
	z := rand.Intn(10)
	return x, y, z
}

func main() {
	const freezingF = 32.0
	const boilingF = 212.0
	fmt.Printf("%g°F = %g°C\n", freezingF, fToC(freezingF))
	fmt.Printf("%g°F = %g°C\n", boilingF, fToC(boilingF))

	r1, r2, r3 := threeRandom()
	fmt.Println(r1, r2, r3)
}</code></pre>
      <h3>Gán tuple</h3>
      <div class="source-file">tuple-assignment.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

/**
 * Ước số chung lớn nhất (Greatest Common Divisor)
 */
func gcd(x, y int) int {
	for y != 0 {
		x, y = y, x%y
	}
	return x
}

/**
 * Fibonacci.
 */
func fib(n int) int {
	x, y := 0, 1
	for i := 0; i &lt; n; i++ {
		x, y = y, x+y
	}
	return x
}

func main() {
	fmt.Println("Tuple")
}</code></pre>
      <h3>Cấu trúc điều khiển</h3>
      <h4>if else</h4>
      <p>Không cần dấu mở ngoặc và đóng ngoặc. Nếu thêm vào thì <code>golint</code>
        cũng tự động bỏ đi.</p>
      <div class="source-file">condition.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"math/rand"
	"time"
)

func main() {
	rand.Seed(time.Now().UnixNano())
	num := 5 + rand.Intn(10)
	var desc string
	if num &gt; 0 {
		desc = "positive"
	} else if num == 0 {
		desc = "zero"
	} else {
		desc = "negative"
	}
	fmt.Println("The number", num, "is", desc)
}</code></pre>
      <h4>switch</h4>
      <p>Không cần từ khóa <code>break</code> ở mỗi block.</p>
      <div class="source-file">switch.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"runtime"
)

func main() {
	os := runtime.GOOS
	switch os {
	case "windows":
		fmt.Println("Windows")
	case "darwin":
		fmt.Println("Mac")
	case "linux":
		fmt.Println("Linux")
	default:
		fmt.Println(os)
	}
}</code></pre>
      <p>Có thêm từ khóa <code>fallthrough</code> để. </p>
      <h4>for</h4>
      <p>Cấu trúc chung:</p>
      <pre>for initialization; condition; post {<br>}</pre>
      <p>Có thể giản lược để thay thế các vòng lặp while, do-while trong các
        ngôn ngữ khác:</p>
      <pre>// Vòng lặp "while"<br>for condition {<br>}<br><br>// Vòng lặp vô hạn<br>for {<br>}</pre>
      <p>Có thể sử dụng <code>break</code> và <code>continue</code> trong vòng
        lặp như các ngôn ngữ khác.</p>
      <h5>Từ khóa range</h5>
      <p>Cấu trúc:</p>
      <pre>for first, second := range x {<br>}</pre>
      <p>Từ khóa <code>range</code> được sử dụng để lặp qua các phần tử của
        mảng, slice, channel, map. Với mảng và slice, index là số nguyên. Với
        map, nó trả về key của cặp key-value. Range trả về một hoặc hai giá trị.
        Nếu chỉ một giá trị được sử dụng ở bên trái biểu thức<code> range</code>,
        nó là giá trị đầu tiên trong bảng sau:</p>
      <table class="table table-bordered table-responsive-md">
        <thead>
          <tr>
            <th>Loại dữ liệu</th>
            <th>Khai báo</th>
            <th>Giá trị đầu tiên</th>
            <th>Giá trị thứ hai (tùy chọn)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Mảng hoặc slice</td>
            <td>a [n]E</td>
            <td>index i int</td>
            <td>a[i] E</td>
          </tr>
          <tr>
            <td>Xâu</td>
            <td>s string</td>
            <td>index i int</td>
            <td>rune int</td>
          </tr>
          <tr>
            <td>Map</td>
            <td>m map[K]V</td>
            <td>key k K</td>
            <td>value m[k] V</td>
          </tr>
          <tr>
            <td>Channel</td>
            <td>c chan E</td>
            <td>Phần tử e E</td>
            <td>none</td>
          </tr>
        </tbody>
      </table>
      <div class="source-file">rangedemo.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

func rangeArray() {
	numbers := []int{0, 1, 2, 3, 4, 5, 6, 7, 8}
	for i, e := range numbers {
		fmt.Println("Slice item", i, "is", e)
	}
}

func rangeMap() {
	countryCapitalMap := map[string]string{
		"France": "Paris",
		"Italy":  "Rome",
		"Japan":  "Tokyo",
	}
	for country, capital := range countryCapitalMap {
		fmt.Println("Capital of", country, "is", capital)
	}
}

func rangeString() {
	s := "Tuấn"
	for _, c := range s {
		fmt.Println(c)
		fmt.Printf("%c\n", c)
	}
}

func rangeChannel() {
	ch := make(chan int)
	go func() {
		ch &lt;- 5
		ch &lt;- 6
		ch &lt;- 7
		close(ch)
	}()
	for n := range ch {
		fmt.Println(n)
	}
}

func main() {
	rangeArray()
	rangeMap()
	rangeString()
	rangeChannel()
}</code></pre>
      <h5>Hàm len</h5>
      <p>Hàm <code>len()</code> trả về độ dài của v, tùy theo kiểu dữ liệu của
        nó.</p>
      <pre>func len(v Type) int</pre>
      <ul>
        <li>Mảng: số phần tử trong mảng</li>
        <li>Pointer đến mảng: Số phần tử trong <code>*v</code></li>
        <li>Slice hoặc map: Số phần tử trong <code>v</code></li>
        <li>String: Số byte</li>
        <li>Channel: Số phần tử đang đợi (chưa đọc) </li>
      </ul>
      <h3>Loại dữ liệu cơ bản</h3>
      <ul>
        <li>Số
          <ul>
            <li>Số nguyên
              <ul>
                <li>Kiểu <code>rune</code> tương đương <code>int32</code></li>
              </ul>
            </li>
            <li>Số dấu phảy động</li>
            <li>Số phức</li>
          </ul>
        </li>
        <li><code>string</code>
          <ul>
            <li>Sử dụng package <code>strings</code> (<code>strings.Join</code>)</li>
            <li>Convert giữa string và số bằng package <code>strconv</code> (<code>strconv.Itoa</code>,
              <code>strconv.Atoi</code>)</li>
          </ul>
        </li>
        <li><code>bool</code></li>
      </ul>
      <h3>Array, slice</h3>
      <p>Array thì có độ dài cố định, ít khi sử dụng trực tiếp. Slice có thể
        tăng hoặc giảm kích thước.</p>
      <p>Để thêm phần tử vào slice, sử dụng hàm <code>append()</code>.</p>
      <p>Hàm <code>cap()</code>:</p>
      <p>Hàm <code>copy()</code>:</p>
      <p>Hàm <code>len()</code>: trả về số phần tử của mảng hoặc slice</p>
      <p>Hàm <code>make()</code>:</p>
      <p>Để xóa phần tử khỏi mảng, sử dụng hàm ?</p>
      <div class="source-file">arraydemo.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

// Khai báo []int (không để kích thước) sẽ bị lỗi
func printArray(a [3]int) {
	for _, v := range a {
		fmt.Println(v)
	}
}

func main() {
	var a1 [3]int = [3]int{1, 2, 3}

	// Sử dụng dấu ba chấm thì không cần chỉ định độ dài
	a2 := [...]int{
		1,
		2,
		3, // phải có dấu phảy ở cuối khi khai báo trên nhiều dòng
	}
	printArray(a1)
	printArray(a2)
}</code></pre>
      <div class="source-file">slicedemo.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

func printSlice(a []int) {
	for _, v := range a {
		fmt.Println(v)
	}
}

func main() {
	var a1 []int = []int{1, 2, 3}

	// Sử dụng dấu ba chấm thì không cần chỉ định độ dài
	a2 := []int{
		1,
		2,
		3, // phải có dấu phảy ở cuối khi khai báo trên nhiều dòng
	}
	printSlice(a1)
	printSlice(a2)

	var runes []rune
	for _, r := range "Hello, BF" {
		runes = append(runes, r)
	}
	fmt.Printf("%q\n", runes) // "['H'' e'' l'' l'' o'' ,'''' B'' F']"
}</code></pre>
      <h3>Map </h3>
      <p>Để xóa phần tử khỏi map thì sử dụng hàm <code>delete()</code>.</p>
      <p>Sử dụng hàm <code>make()</code> để khởi tạo map.</p>
      <div class="source-file">mapdemo.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

func main() {
	// Khai báo luôn
	ages1 := map[string]int{
		"alice":   31,
		"charlie": 34,
	}
	for person, age := range ages1 {
		fmt.Println(person, ": ", age)
	}

	// Hoặc phải có hàm make
	ages2 := make(map[string]int)
	ages2["alice"] = 31
	ages2["charlie"] = 34

	delete(ages2, "alice")
}</code></pre>
      <h3>Struct</h3>
      <div class="source-file">structdemo.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"strconv"
	"time"
)

type Employee struct {
	ID        int
	Name      string
	Address   string
	DoB       time.Time
	Position  string
	Salary    int
	ManagerID int
}

func (e Employee) getInfo() string {
	return "ID: " + strconv.Itoa(e.ID) + ", Name: " + e.Name
}

func main() {
	dilbert := Employee{
		ID:   1,
		Name: "Dilbert",
	}
	dilbert.Salary = 5000
	fmt.Println(dilbert.getInfo())
}</code></pre>
      <p>Có thể sử dụng phương thức với struct.</p>
      <p>Struct có thể được embed để kế thừa.</p>
      <h3>Interface</h3>
      <div class="source-file">interfacedemo.go</div>
      <pre class="code-block"><code class="go">package main

import "fmt"

type Triangle struct {
	width  float64
	height float64
}

type Rectangle struct {
	width  float64
	height float64
}

type Circle struct {
	radius float64
}

func (t Triangle) GetArea() float64 {
	return t.width * t.height / 2
}

func (r Rectangle) GetArea() float64 {
	return r.width * r.height
}

type Area interface {
	GetArea(p []byte) (n int, err error)
}

// ----------------------------------------------

type Human struct {
	name  string
	age   int
	phone string
}

type Student struct {
	Human
	school string
	loan   float32
}

type Employee struct {
	Human
	company string
	salary  float32
}

// Interface Men sẽ được implement bởi Human, Student, Employee
type Men interface {
	SayHi()
	Sing(lyrics string)
}

// Bạn phải implement các phương thức như sau
// nếu không khi gán sẽ bị lỗi compile
func (h Human) SayHi() {
	fmt.Printf("Xin chào, tôi là %s. Bạn có thể gọi tôi theo số điện thoại %s\n", h.name, h.phone)
}

func (h Human) Sing(lyrics string) {
	fmt.Println("La la la la...", lyrics)
}

func (e Employee) SayHi() {
	fmt.Printf("Xin chào, tôi là %s. Tôi làm việc ở %s\n",
		e.name,
		e.company)
}

func main() {
	mike := Student{Human{"Mike", 25, "222-222-XXX"}, "MIT", 0.00}
	paul := Student{Human{"Paul", 25, "222-222-XXX"}, "Harvard", 100}
	sam := Employee{Human{"Sam", 25, "222-222-XXX"}, "Golang Inc.", 1000}
	tom := Employee{Human{"Tom", 25, "222-222-XXX"}, "Things Ltd.", 5000}

	var men Men

	// men có thể chứa Student
	men = mike
	fmt.Println("Đây là Mike, một sinh viên")
	men.SayHi()
	men.Sing("November rain")

	// men cũng có thể chứa Employee
	men = tom
	fmt.Println("Đây là Tom, một nhân viên")
	men.SayHi()
	men.Sing("Bé bé bồng bông")

	arr := [...]Men{
		paul,
		sam,
		mike,
	}
	for _, e := range arr {
		e.SayHi()
	}
}</code></pre>
      <h3>Datetime</h3>
      <p>Sửa dụng package <code>time</code>.</p>
      <div class="source-file">duration.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"log"
	"time"
)

func track() time.Time {
	return time.Now()
}

func duration(msg string, start time.Time) {
	log.Printf("%v: %v\n", msg, time.Since(start))
}

func foo() {
	defer duration("foo", track())
	time.Sleep(3 * time.Second)
	log.Println("Thực hiện xong hàm")
}

func main() {
	foo()
}</code></pre>
      <h3>Xử lý file</h3>
      <p>Để đọc và ghi file, đơn giản nhất là sử dụng package <code>io/ioutil</code>
        và các hàm <code>ReadFile()</code>, <code>WriteFile()</code>.</p>
      <p>Cấu trúc các hàm là:</p>
      <pre>func ioutil.ReadFile(filename string) ([]byte, error)
func ioutil.WriteFile(filename string, data []byte, perm fs.FileMode) error</pre>
      <div class="note">Chú ý: do đầu vào và đầu ra đều là mảng <code>byte</code>
        nên chúng ta phải convert về <code>string</code>.</div>
      <div class="source-file">write_file.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"io/ioutil"
	"log"
)

func main() {
	s := "Nguyễn Anh Tuấn"
	data := []byte(s)
	filename := "data.txt"
	// perm := 0644
	err := ioutil.WriteFile(filename, data, 0644)
	if err != nil {
		log.Fatal(err)
	}
	fmt.Println("Done")
}</code></pre>
      <div class="source-file">read_file.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"io/ioutil"
)

func main() {
	data, _ := ioutil.ReadFile("data.txt")
	s := string(data)
	fmt.Println(data)
	fmt.Println(s)
}</code></pre>
      <h3>JSON</h3>
      <p>Sử dụng package <code>encoding/json</code>, hàm <code>Marshal()</code>
        và <code>Unmarshal()</code>.</p>
      <p>Các trường không viết hoa sẽ không được output.</p>
      <div class="source-file">json_demo.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"encoding/json"
	"fmt"
)

type User struct {
	Id   int
	Name string
	Job  string
	// Tên trường mà bắt đầu bằng chữ thường
	// sẽ không hiển thị ở JSON output
	desc string
}

func outputJson() {
	u1 := User{1, "John Doe", "gardener", "Sẽ không hiển thị ở JSON"}
	data, _ := json.Marshal(u1)
	fmt.Println(string(data))
}

func parseJson() {
	s := `{
        "Id" : 1,
        "Name": "John Doe",
        "Job": "gardener"
    }`
	data := []byte(s)
	var u2 User
	json.Unmarshal(data, &amp;u2)
	fmt.Println(u2.Name, u2.Job)
}

func main() {
	outputJson()
	parseJson()
}</code></pre>
      <h3>Format</h3>
      <p>Hàm <code>fmt.Printf()</code>, <code>fmt.Println()</code>, <code>fmt.Sscanf()</code>,...
        có <em>verb</em>:</p>
      <table class="table table-bordered table-responsive-md">
        <tbody>
          <tr>
            <td><code>%d</code></td>
            <td>Số nguyên cơ số 10 (decimal)</td>
          </tr>
          <tr>
            <td><code>%x</code></td>
            <td>Số nguyên cơ số 16 (hexa)</td>
          </tr>
          <tr>
            <td><code>%o</code></td>
            <td>Số nguyên cơ số 8 (octal)</td>
          </tr>
          <tr>
            <td><code>%b</code></td>
            <td>Số nguyên nhị phân (binary)</td>
          </tr>
          <tr>
            <td><code>%f</code>, <code>%g</code>, <code>%e</code></td>
            <td>Số dấu phảy động</td>
          </tr>
          <tr>
            <td><code>%t</code></td>
            <td><code>true</code> hoặc <code>false</code></td>
          </tr>
          <tr>
            <td><code>%c</code></td>
            <td>Mã Unicode</td>
          </tr>
          <tr>
            <td><code>%s</code></td>
            <td>Xâu</td>
          </tr>
          <tr>
            <td><code>%q</code></td>
            <td>quoted string "abc" hoặc rune 'c'</td>
          </tr>
          <tr>
            <td><code>%v</code></td>
            <td>Bất kỳ giá trị nào ở format dạng tự nhiên</td>
          </tr>
          <tr>
            <td><code>%T</code></td>
            <td>Kiểu của giá trị</td>
          </tr>
          <tr>
            <td><code>%%</code></td>
            <td>Ký tự <code>%</code></td>
          </tr>
        </tbody>
      </table>
      <div class="source-file">hex_to_rgb.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"strings"
)

func hexToRgb(hex string) {
	var r, g, b int
	patterns := "#" + strings.Repeat("%02x", 3)
	_, err := fmt.Sscanf(hex, patterns, &amp;r, &amp;g, &amp;b)
	fmt.Println(hex, err, r, g, b)
}

func main() {
	hexArr := []string{
		"#112233",
		"#123",
		"#000233",
		"#023",
		"invalid",
		"#abcd",
		"#-12",
	}
	for _, hex := range hexArr {
		hexToRgb(hex)
	}
}</code></pre>
      <h3>Web server</h3>
      <p>Tạo một HTTP server đơn giản.</p>
      <div class="source-file">simple_server.go</div>
      <pre class="code-block"><code class="go">package main

import (
	"fmt"
	"log"
	"net/http"
	"strconv"
)

func HelloHandler(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "Hello World")
}

func main() {
	port := 8080
	http.HandleFunc("/", HelloHandler)
	log.Fatal(http.ListenAndServe(":"+strconv.Itoa(port), nil))
}</code></pre>
      <p>Start server:</p>
      <pre>go run simple_server.go</pre>
      <p>Truy cập địa chỉ <a href="http://localhost:8080/" target="_blank">http://localhost:8080/</a>
        để kiểm tra.</p>
      <p>Mục tiêu: Tạo REST API.</p>
      <p>Trên mạng hay sử dụng thư viện:</p>
      <p><a href="https://github.com/gorilla/mux" target="_blank">gorilla/mux: A
          powerful HTTP router and URL matcher for building Go web servers with
          🦍</a></p>
      <p>Tuy nhiên, tôi chỉ dùng Go để tạo các API riêng lẻ, đơn giản, cần tốc
        độ cao. Hệ thống web to vẫn sử dụng Laravel.</p>
      <h3>Pointer</h3>
      <p>Giống ngôn ngữ C.</p>
      <p>Lấy địa chỉ bằng <code>&amp;</code>.</p>
      <p>Khai báo bằng <code>*</code>.</p>
      <p>Phương thức của struct mà có thay đổi các giá trị của struct thì cần
        khai báo pointer.</p>
      <pre class="code-block"><code class="go">func (p *Point) ScaleBy(factor float64) {
	p.X *= factor
	p.Y *= factor
}</code></pre>
      <h3>Build</h3>
      <p>Windows</p>
      <p>Linux</p>
      <p>Mac</p>
      <h3>Câu lệnh go</h3>
      <p><code>build</code>:</p>
      <p>clean:</p>
      <p>doc:</p>
      <p>env:</p>
      <p>fmt:</p>
      <p>get:</p>
      <p>install:</p>
      <p>list:</p>
      <p><code>run</code>:</p>
      <p>test:</p>
      <p><code>version</code>:</p>
      <p>vet:</p>
      <h3>Package</h3>
      <p>Để chạy phải để trong package <code>main</code>, hàm <code>main</code>.</p>
      <p>Package hỗ trợ modularity, encapsulation, separation, reuse.</p>
      <p>Convention: Tên file viết liền?</p>
      <p>Import local package?</p>
      <p>Chữ cái đầu tiên viết hoa thì được export.</p>
      <p>Chữ cái đầu tiên viết thường thì không thể truy cập.</p>
      <p>Tên file nên đặt chữ thường hết, viết liền (không có gạch ngang hoặc
        gạch dưới?).</p>
      <p>Tool <code>goimports</code>.</p>
      <p>Hàm <code>init()</code> tự động thực hiện theo thứ tự khai báo.</p>
      <p>Khi source code nhiều thì cần chia ra cho dễ maintain.</p>
      <h3>Regex</h3>
      <p>Biểu thức chính quy</p>
      <h3>Testing</h3>
      <p>Lệnh <code>go test</code>.</p>
      <p>Các file có dạng <code>*_test.go</code>.</p>
      <p>Hàm có dạng:</p>
      <pre class="code-block"><code class="go">func TestName(t *testing.T) {<br>}</code></pre>
      <h3>Logging</h3>
      <p>Lưu log.</p>
      <p>Sử dụng package có sẵn <code>log</code> luôn.</p>
      <p>Log ra file thế nào?</p>
      <h3>Goroutine và channel</h3>
      <p>Xử lý biến dùng chung.</p>
      <h3>Panic và recover</h3>
      <p>TODO</p>
      <h3>Redis</h3>
      <p>Thao tác với Redis.</p>
      <h3>MySQL</h3>
      <p>Thao tác với MySQL.</p>
      <h3>VSCode extension</h3>
      <p><a href="https://marketplace.visualstudio.com/items?itemName=golang.go"
          target="_blank">Go - Visual Studio Marketplace</a></p>
      <p> Highlight syntax</p>
      <p>Tự động format code</p>
      <p>Tự động thêm import</p>
      <h3>Tham khảo</h3>
      <p>Nhiều code ví dụ:</p>
      <p><a href="https://zetcode.com/all/#go" target="_blank">ZetCode all
          tutorials</a></p>
      <p><a href="https://en.wikipedia.org/wiki/Go_%28programming_language%29" target="_blank">Go
          (programming language) - Wikipedia</a></p>
      <p><a href="https://golang.org/" target="_blank">The Go Programming
          Language</a></p>
      <p><a href="https://viblo.asia/tags/golang" target="_blank">golang - Viblo</a></p>
      <p><a href="https://github.com/avelino/awesome-go" target="_blank">avelino/awesome-go:
          A curated list of awesome Go frameworks, libraries and software</a></p>
      <p><a href="https://github.com/uber-go/guide" target="_blank">uber-go/guide:
          The Uber Go Style Guide</a></p>
      <p>---</p>
      <p>Tách post khác:</p>
      <p>Học cấu trúc dữ liệu và giải thuật để luyện tư duy .</p>
      <p>Học cấu trúc dữ liệu và giải thuật để luyện tư duy; data structures and
        algorithms</p>
      <p><a href="https://www.golangprograms.com/data-structure-and-algorithms.html"
          target="_blank">The fundamentals of the Go programming language from
          the perspective of data structures and algorithms. -
          golangprograms.com</a></p>
      <p><a href="https://en.wikipedia.org/wiki/String-searching_algorithm" target="_blank">String-searching
          algorithm - Wikipedia</a> </p>
      <p><a href="https://en.m.wikipedia.org/wiki/List_of_data_structures" target="_blank">List
          of data structures - Wikipedia</a> </p>
      <p><a href="https://grpc.io/" target="_blank">gRPC</a></p>
      <p><a href="https://www.youtube.com/playlist?list=PLVDJsRQrTUz7-fSzZWtF726st5AYQc57A"
          target="_blank">Golang thực chiến - YouTube</a></p>
      <p><a href="https://www.youtube.com/watch?v=KIKefiH0bHI&amp;list=PLVDJsRQrTUz5icsxSfKdymhghOtLNFn-k&amp;index=20"
          target="_blank">Lập trình Golang - 01 Cài đặt môi trường | Setup
          environment - YouTube</a></p>
      <p><a href="https://www.youtube.com/watch?v=75lJDVT1h0s&amp;list=PLzMcBGfZo4-mtY_SE3HuzQJzuj4VlUG0q"
          target="_blank">Golang Tutorial #1 - An Introduction to Go Programming
          - YouTube</a></p>
      <p><a href="https://www.toptal.com/go/golang-oop-tutorial" target="_blank">Golang
          OOP: Go, the Object-oriented Way | Toptal</a> </p>
      <p><a href="https://www.toptal.com/go/4-go-language-criticisms" target="_blank">Golang:
          4 Go Language Criticisms | Toptal</a> </p>
    </article>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/styles/github-gist.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/languages/go.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script src="../../js/docs.js"></script>
  </body>
</html>
